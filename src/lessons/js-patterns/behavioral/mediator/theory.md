Mediator
========

В разделе, посвященном шаблону Observer, мы познакомились с способом направления нескольких источников событий через один объект. Это также известно как публикация / подписка или агрегирование событий. Обычно разработчики думают о Mediator'ах, когда сталкиваются с этой задачей, поэтому давайте посмотрим, как они отличаются.

Словарь ссылается на Посредника как на нейтральную сторону, которая помогает в переговорах и разрешении конфликтов. В нашем мире медиатор - это шаблон поведения, позволяющий нам  создать унифицированный интерфейс, через который могут взаимодействовать различные части системы.

Если кажется, что система имеет слишком много прямых отношений между компонентами,
может быть, как раз стоит выделить центральную точку управления, через
которую компоненты будут общаться. Посредник способствует свободному взаимодействию,
гарантируя, что вместо того, чтобы компоненты ссылались друг
на друга в явном виде, их взаимодействие обрабатывается через эту центральную
точку. Это может помочь нам ослабить связывание в системе и повысить потенциал повторного использования компонентов.

Аналогом реального мира может быть типичная система управления движением в аэропортах.
Башня (Посредник) управляет тем, какие самолеты могут взлетать и приземляться, потому что все
коммуникации (уведомления, которые выслушиваются или транслируются) выполняются с самолетов
на диспетчерскую, а не напрямую от самолёта к самолёту.
Централизованный контроллер является ключом к успеху этой системы, и это является ролью посредника в разработке программного обеспечения.

Еще одна аналогия - всплытие и делегирование событий DOM.
Если все подписки в системе делаются в отношении документа, а не отдельных узлов,
документ эффективно служит посредником. Вместо привязки к событиям отдельных узлов,
объект более высокого уровня получает ответственность уведомлять абонентов о событиях взаимодействия.


Когда дело доходит до шаблонов Mediator и Event Aggregator, есть моменты, когда они могут выглядеть как взаимозаменяемые шаблоны из-за сходства реализации. Однако семантика и намерение этих шаблонов сильно различаются.

Простой Медиатор
----------------

Посредник - это объект, который координирует взаимодействия (логику и поведение) между несколькими объектами. Он принимает решения о том, когда следует вызывать какие объекты, на основе действий (или бездействия) других объектов и ввода.

Вы можете написать посредника, используя одну строку кода:

```
const mediator = {};
```

Да, конечно, это всего лишь объектный литерал в JavaScript.
Еще раз, мы говорим о семантике. Цель посредника состоит в том, чтобы контролировать
рабочий процесс между объектами, и нам действительно не нужно ничего, кроме объектного литерала.

```
var orgChart = {

  addNewEmployee: function(){

    // getEmployeeDetail provides a view that users interact with
    var employeeDetail = this.getEmployeeDetail();

    // when the employee detail is complete, the mediator (the 'orgchart' object)
    // decides what should happen next
    employeeDetail.on("complete", function(employee){

      // set up additional objects that have additional events, which are used
      // by the mediator to do additional things
      var managerSelector = this.selectManager(employee);
      managerSelector.on("save", function(employee){
        employee.save();
      });

    });
  },

  // ...
}
```

В этом примере показана очень простая реализация объекта-посредника с некоторыми служебными методами, которые могут запускать и подписываться на события.

